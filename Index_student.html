<!-- Index_student.html -->
<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sổ Theo Dõi Học Sinh</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- Tích hợp file CSS_student.html -->
    <?!= include('CSS_student'); ?>
</head>
<body>
    <!-- Loading Spinner -->
    <div id="loading" class="loading-overlay">
        <div class="loading-spinner">
            <div class="spinner"></div>
            <p>Đang tải...</p>
        </div>
    </div>

    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <div class="header-left">
                <button class="menu-toggle" id="menuToggle">
                    <i class="fas fa-bars"></i>
                </button>
                <h1 class="header-title">
                    <i class="fas fa-book"></i>
                    Sổ Theo Dõi Học Sinh
                </h1>
            </div>
            <div class="header-right">
                <div class="current-date" id="currentDate"></div>
                <button class="refresh-btn" id="refreshBtn" title="Làm mới">
                    <i class="fas fa-sync-alt"></i>
                </button>
                <button class="logout-btn" id="logoutBtn" title="Đăng xuất" style="display: none;">
                    <i class="fas fa-sign-out-alt"></i>
                    <span id="currentUser"></span>
                </button>
            </div>
        </div>
    </header>

    <!-- Sidebar Navigation -->
    <nav class="sidebar" id="sidebar">
        <div class="nav-header">
            <div class="nav-logo">
                <i class="fas fa-user-graduate"></i>
                <span>Quản lý học sinh</span>
            </div>
            <button class="nav-close" id="navClose">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <ul class="nav-menu">
            <li class="nav-item active" data-page="dashboard">
                <a href="#" class="nav-link">
                    <i class="fas fa-home"></i>
                    <span>Tổng quan</span>
                </a>
            </li>
            <li class="nav-item" data-page="diary">
                <a href="#" class="nav-link">
                    <i class="fas fa-book-open"></i>
                    <span>Nhật ký học tập</span>
                </a>
            </li>
            <li class="nav-item" data-page="statistics">
                <a href="#" class="nav-link">
                    <i class="fas fa-chart-bar"></i>
                    <span>Thống kê</span>
                </a>
            </li>
            <li class="nav-item" data-page="students">
                <a href="#" class="nav-link">
                    <i class="fas fa-list"></i>
                    <span>Danh sách học sinh</span>
                </a>
            </li>
        </ul>
    </nav>

    <!-- Overlay for mobile -->
    <div class="overlay" id="overlay"></div>

    <!-- Main Content -->
    <main class="main-content" id="mainContent">

        <!-- Dashboard Page -->
        <div class="page active" id="dashboardPage">
            <div class="page-header">
                <h2><i class="fas fa-home"></i> Tổng quan</h2>
                <div class="page-actions">
                    <select class="form-select" id="dashboardClassFilter">
                        <option value="">Tất cả lớp</option>
                    </select>
                    <select class="form-select" id="dashboardMonth">
                        <!-- Auto generate tháng -->
                    </select>
                    <select class="form-select" id="dashboardYear">
                        <!-- Auto generate năm -->
                    </select>
                </div>
            </div>
            <div class="overview-stats" id="overviewStats">
                <!-- Card thống kê: tổng số HS, chuyên cần, vi phạm, khen thưởng, top học sinh -->
            </div>
            <div class="statistics-content" id="dashboardContent">
                <!-- Có thể thêm biểu đồ nhỏ, top học sinh, cảnh báo vi phạm, ... -->
            </div>
        </div>

        <!-- Diary Page -->
        <div class="page" id="diaryPage">
            <div class="page-header">
                <h2><i class="fas fa-book-open"></i> Nhật ký học tập</h2>
                <div class="page-actions">
                    <select class="form-select" id="diaryClassFilter">
                        <option value="">Tất cả lớp</option>
                    </select>
                    <select class="form-select" id="diaryStudentSelect">
                        <option value="">Chọn học sinh...</option>
                    </select>
                </div>
            </div>
            <div class="diary-content" id="diaryContent">
                <!-- Hiện bảng điểm, nhật ký học tập, nhận xét, bảng nề nếp của học sinh đã chọn -->
            </div>
        </div>

        <!-- Statistics Page -->
        <div class="page" id="statisticsPage">
            <div class="page-header">
                <h2><i class="fas fa-chart-bar"></i> Thống kê</h2>
                <div class="page-actions">
                    <select class="form-select" id="statsClass">
                        <option value="">Tất cả lớp</option>
                    </select>
                    <select class="form-select" id="statsMonth">
                        <!-- Auto generate tháng -->
                    </select>
                    <select class="form-select" id="statsYear">
                        <!-- Auto generate năm -->
                    </select>
                </div>
            </div>
            <div class="statistics-content" id="statisticsContent">
                <div class="empty-state">
                    <i class="fas fa-chart-bar"></i>
                    <h3>Chọn tiêu chí để xem thống kê</h3>
                </div>
            </div>
        </div>

        <!-- Students Page -->
        <div class="page" id="studentsPage">
            <div class="page-header">
                <h2><i class="fas fa-list"></i> Danh sách học sinh</h2>
                <div class="page-actions">
                    <button class="btn btn-primary" id="addStudentBtn">
                        <i class="fas fa-plus"></i> Thêm học sinh
                    </button>
                </div>
            </div>
            <div class="student-management">
                <div class="search-box">
                    <i class="fas fa-search"></i>
                    <input type="text" placeholder="Tìm kiếm học sinh..." id="studentSearch">
                </div>
                <div class="student-table-container">
                    <table class="student-table">
                        <thead>
                            <tr>
                                <th>Mã HS</th>
                                <th>Họ và tên</th>
                                <th>Lớp</th>
                                <th>Ngày sinh</th>
                                <th>Thao tác</th>
                            </tr>
                        </thead>
                        <tbody id="studentTableBody">
                            <!-- Student rows will be generated here -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </main>

    <!-- Student Modal (Add/Edit) -->
    <div class="modal" id="studentModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalTitle">Thêm Học Sinh</h3>
                <button class="modal-close" id="modalClose">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form id="studentForm">
                    <div class="form-group">
                        <label for="studentCode">Mã học sinh</label>
                        <input type="text" id="studentCode" class="form-input" placeholder="Mã học sinh">
                    </div>
                    <div class="form-group">
                        <label for="studentName">Họ và tên</label>
                        <input type="text" id="studentName" class="form-input" placeholder="Nhập tên học sinh" required>
                    </div>
                    <div class="form-group">
                        <label for="studentClass">Lớp</label>
                        <input type="text" id="studentClass" class="form-input" placeholder="Lớp" required>
                    </div>
                    <div class="form-group">
                        <label for="studentDOB">Ngày sinh</label>
                        <input type="date" id="studentDOB" class="form-input" required>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" id="modalCancel">Hủy</button>
                <button class="btn btn-primary" id="modalSave">Lưu</button>
            </div>
        </div>
    </div>

    <!-- Confirm Modal -->
    <div class="modal" id="confirmModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Xác nhận</h3>
                <button class="modal-close" id="confirmModalClose">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <p id="confirmMessage"></p>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" id="confirmCancel">Hủy</button>
                <button class="btn btn-danger" id="confirmOk">Xác nhận</button>
            </div>
        </div>
    </div>

    <!-- Toast Notifications -->
    <div class="toast-container" id="toastContainer"></div>

    <!-- Kết nối file JS -->
    <?!= include('JavaScript_student'); ?>
</body>
</html>
